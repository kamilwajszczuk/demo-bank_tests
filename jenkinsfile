pipeline {
   agent { docker { image 'mcr.microsoft.com/playwright:v1.55.1-noble' } }
   stages {
      stage('Build') {
            steps {
                sh 'npm install' // Uruchomienie polecenia wewnÄ…trz kontenera
                sh 'npm run build'
            }
        }
        stage('Test') {
            steps {
                sh 'npm test'
            }
        }
        stage('Deploy') {
            steps {
                sh 'docker build -t myapp:latest .'
                sh 'docker run -d -p 8080:8080 myapp:latest'
            }
        }
   }
}
